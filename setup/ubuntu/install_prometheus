#/bin/bash

#
# curl https://raw.githubusercontent.com/WALL-E/crypto-toolkit/master/setup/ubuntu/install_prometheus | bash
#
# wget https://raw.githubusercontent.com/WALL-E/crypto-toolkit/master/setup/ubuntu/install_prometheus -O install_prometheus
#
# prometheus
#
#

set -e
set -x

VERSION=2.31.1

role=`id -u`
if test $role -ne 0
then
    echo "You install Docker which requires root privileges"
    exit 1
fi

mkdir -p /etc/prometheus
mkdir -p /var/lib/prometheus

wget https://github.com/prometheus/prometheus/releases/download/v$VERSION/prometheus-$VERSION.linux-amd64.tar.gz 
tar -xvf prometheus-$VERSION.linux-amd64.tar.gz 
cd prometheus-$VERSION.linux-amd64
mv prometheus promtool /usr/local/bin/
mv prometheus.yml /etc/prometheus/prometheus.yml
mv consoles/ console_libraries/ /etc/prometheus/
cd -
rm -fr prometheus-$VERSION.linux-amd64

prometheus --version



echo
echo "prometheus is fine"
